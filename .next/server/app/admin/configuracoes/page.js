(()=>{var e={};e.id=7,e.ids=[7],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},4577:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},1885:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=a(7096),t=a(6132),o=a(7284),n=a.n(o),i=a(2564),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);a.d(r,l);let d=["",{children:["admin",{children:["configuracoes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,6909)),"/projetos/cardapio/src/app/admin/configuracoes/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,9862)),"/projetos/cardapio/src/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,2594)),"/projetos/cardapio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/projetos/cardapio/src/app/admin/configuracoes/page.tsx"],u="/admin/configuracoes/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/admin/configuracoes/page",pathname:"/admin/configuracoes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8799:(e,r,a)=>{Promise.resolve().then(a.bind(a,9996))},9996:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>d});var s=a(3854),t=a(4218),o=a(1956),n=a.n(o),i=a(9184),l=a(5256);function d(){let[e,r]=(0,t.useState)(""),[a,o]=(0,t.useState)(""),[d,u]=(0,t.useState)(""),[m,p]=(0,t.useState)(""),[x,g]=(0,t.useState)(null),[h,y]=(0,t.useState)(!1),b=(0,t.useRef)(null),[f,v]=(0,t.useState)(!0),[j,N]=(0,t.useState)("0.00"),[w,_]=(0,t.useState)("0.00"),[k,S]=(0,t.useState)("30-45"),[C,q]=(0,t.useState)("5"),[E,P]=(0,t.useState)({monday:"10:00-22:00",tuesday:"10:00-22:00",wednesday:"10:00-22:00",thursday:"10:00-22:00",friday:"10:00-23:00",saturday:"10:00-23:00",sunday:"11:00-22:00"}),[$,D]=(0,t.useState)("general"),[F,R]=(0,t.useState)(!0),[M,O]=(0,t.useState)(!1);(0,t.useEffect)(()=>{A()},[]);let A=async()=>{try{R(!0);let{data:e,error:a}=await i.OQ.from("settings").select("key, value");if(a)throw a;e&&e.length>0&&e.forEach(e=>{switch(e.key){case"whatsapp_number":r(e.value);break;case"store_name":o(e.value);break;case"address":u(e.value);break;case"store_open":v("true"===e.value);break;case"delivery_fee":N(e.value);break;case"min_order_value":_(e.value);break;case"delivery_time":S(e.value);break;case"delivery_radius":q(e.value);break;case"logo_url":p(e.value);break;case"business_hours":try{let r=JSON.parse(e.value);r&&"object"==typeof r&&P(r)}catch(e){console.error("Erro ao processar hor\xe1rios:",e)}}})}catch(e){console.error("Erro ao buscar configura\xe7\xf5es:",e),l.ZP.error("Erro ao carregar configura\xe7\xf5es")}finally{R(!1)}},G=async(e,r)=>{let{data:a,error:s}=await i.OQ.from("settings").select("id").eq("key",e),t=!s&&a&&a.length>0;if(t&&a&&a.length>0){let e=a[0].id,{error:s}=await i.OQ.from("settings").update({value:r,updated_at:new Date().toISOString()}).eq("id",e);if(s)throw s}else{let{error:a}=await i.OQ.from("settings").insert({key:e,value:r,created_at:new Date().toISOString()});if(a)throw a}},H=async r=>{r.preventDefault();try{O(!0);let r=m;if(x){let e=await Q();e&&(r=e)}await Promise.all([G("store_name",a),G("whatsapp_number",e),G("address",d),G("logo_url",r),G("store_open",f.toString()),G("delivery_fee",j),G("min_order_value",w),G("delivery_time",k),G("delivery_radius",C),G("business_hours",JSON.stringify(E))]),l.ZP.success("Configura\xe7\xf5es salvas com sucesso!")}catch(e){console.error("Erro ao salvar configura\xe7\xf5es:",e),l.ZP.error("Erro ao salvar configura\xe7\xf5es")}finally{O(!1)}},Q=async()=>{if(!x)return null;try{y(!0);let e=x.name.split(".").pop(),r=`logo-${Date.now()}.${e}`,a=`logos/${r}`,{data:s,error:t}=await i.OQ.storage.from("products").upload(a,x);if(t)throw t;let o=`https://tcbketwbrlawpbktasva.supabase.co/storage/v1/object/public/products/${s.path}`;return o}catch(e){return console.error("Erro ao fazer upload da logo:",e),l.ZP.error("Erro ao fazer upload da imagem"),null}finally{y(!1)}},z=(e,r)=>{P(a=>({...a,[e]:r}))},T=e=>{let r=e.replace(/[^0-9.]/g,""),a=r.split(".");return a.length>2?a[0]+"."+a.slice(1).join(""):r};return s.jsx("div",{className:"min-h-screen bg-gray-50 pb-8",children:(0,s.jsxs)("div",{className:"p-6",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsx("h1",{className:"text-3xl font-bold",children:"Configura\xe7\xf5es"})}),F?s.jsx("div",{className:"flex justify-center p-12",children:s.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary rounded-full border-t-transparent"})}):(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("div",{className:"border-b border-gray-200 mb-6",children:(0,s.jsxs)("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[s.jsx("button",{onClick:()=>D("general"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"general"===$?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Geral"}),s.jsx("button",{onClick:()=>D("business"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"business"===$?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Funcionamento"}),s.jsx("button",{onClick:()=>D("delivery"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"delivery"===$?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Entrega"})]})}),(0,s.jsxs)("form",{onSubmit:H,className:"space-y-8",children:["general"===$&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Logo do Estabelecimento"}),(0,s.jsxs)("div",{className:"flex items-start space-x-6",children:[s.jsx("div",{className:"w-36 h-36 border-2 border-gray-300 border-dashed rounded-lg flex items-center justify-center relative overflow-hidden",children:m?s.jsx(n(),{src:m,alt:"Logo",width:144,height:144,className:"object-contain"}):s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("input",{type:"file",accept:"image/*",ref:b,className:"hidden",onChange:e=>{if(!e.target.files||0===e.target.files.length)return;let r=e.target.files[0];g(r);let a=new FileReader;a.onload=e=>{e.target?.result&&p(e.target.result.toString())},a.readAsDataURL(r)}}),s.jsx("button",{type:"button",onClick:()=>b.current?.click(),className:"bg-white border border-gray-300 rounded-md shadow-sm py-2 px-3 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",disabled:h,children:h?"Carregando...":"Escolher Logo"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Recomendado: Imagem quadrada de pelo menos 200x200 pixels em formato PNG ou JPG."}),m&&s.jsx("button",{type:"button",onClick:()=>p(""),className:"mt-2 text-sm text-red-600 hover:text-red-800",children:"Remover logo"})]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"store_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Estabelecimento"}),s.jsx("input",{id:"store_name",type:"text",value:a,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary",placeholder:"Nome do seu estabelecimento"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Este nome ser\xe1 exibido no card\xe1pio e nos pedidos."})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Endere\xe7o"}),s.jsx("input",{id:"address",type:"text",value:d,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary",placeholder:"Rua Exemplo, 123 - Bairro, Cidade - UF"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"whatsapp",className:"block text-sm font-medium text-gray-700 mb-1",children:"N\xfamero de WhatsApp"}),(0,s.jsxs)("div",{className:"flex",children:[s.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500",children:"+"}),s.jsx("input",{id:"whatsapp",type:"text",value:e,onChange:e=>r(e.target.value.replace(/\D/g,"")),className:"flex-1 px-3 py-2 border border-gray-300 rounded-r-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary",placeholder:"5511999999999"})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Digite o n\xfamero com c\xf3digo do pa\xeds e DDD, sem espa\xe7os ou caracteres especiais. Exemplo: 5511999999999"})]})]}),"business"===$&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"Status da Loja"}),s.jsx("p",{className:"text-sm text-gray-500",children:f?"Aberto para pedidos":"Fechado para pedidos"})]}),(0,s.jsxs)("button",{type:"button",className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${f?"bg-green-500":"bg-gray-300"}`,onClick:()=>v(!f),children:[s.jsx("span",{className:"sr-only",children:"Alterar status"}),s.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${f?"translate-x-5":"translate-x-0"}`})]})]}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-base font-medium text-gray-900 mb-3",children:"Hor\xe1rios de Funcionamento"}),s.jsx("div",{className:"space-y-3",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsx(c,{day:"Segunda-feira",value:E.monday,onChange:e=>z("monday",e)}),s.jsx(c,{day:"Ter\xe7a-feira",value:E.tuesday,onChange:e=>z("tuesday",e)}),s.jsx(c,{day:"Quarta-feira",value:E.wednesday,onChange:e=>z("wednesday",e)}),s.jsx(c,{day:"Quinta-feira",value:E.thursday,onChange:e=>z("thursday",e)}),s.jsx(c,{day:"Sexta-feira",value:E.friday,onChange:e=>z("friday",e)}),s.jsx(c,{day:"S\xe1bado",value:E.saturday,onChange:e=>z("saturday",e)}),s.jsx(c,{day:"Domingo",value:E.sunday,onChange:e=>z("sunday",e)})]})}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Formato: HH:MM-HH:MM (24h). Exemplo: 10:00-22:00. Deixe em branco para dias fechados."})]})]}),"delivery"===$&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"delivery_fee",className:"block text-sm font-medium text-gray-700 mb-1",children:"Taxa de Entrega (R$)"}),(0,s.jsxs)("div",{className:"flex",children:[s.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500",children:"R$"}),s.jsx("input",{id:"delivery_fee",type:"text",value:j,onChange:e=>N(T(e.target.value)),className:"flex-1 px-3 py-2 border border-gray-300 rounded-r-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary",placeholder:"0.00"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"min_order_value",className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor M\xednimo de Pedido (R$)"}),(0,s.jsxs)("div",{className:"flex",children:[s.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500",children:"R$"}),s.jsx("input",{id:"min_order_value",type:"text",value:w,onChange:e=>_(T(e.target.value)),className:"flex-1 px-3 py-2 border border-gray-300 rounded-r-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary",placeholder:"0.00"})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Valor m\xednimo necess\xe1rio para realizar um pedido. Deixe 0 para n\xe3o ter valor m\xednimo."})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"delivery_time",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tempo de Entrega (minutos)"}),s.jsx("input",{id:"delivery_time",type:"text",value:k,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary",placeholder:"30-45"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Tempo estimado de entrega (ex: 30-45, 40-60)."})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"delivery_radius",className:"block text-sm font-medium text-gray-700 mb-1",children:"Raio de Entrega (km)"}),s.jsx("input",{id:"delivery_radius",type:"number",value:C,onChange:e=>q(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary",placeholder:"5",min:"0",step:"0.5"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Dist\xe2ncia m\xe1xima para entrega em quil\xf4metros."})]})]}),s.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-end",children:s.jsx("button",{type:"submit",disabled:M,className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary-dark transition-colors flex items-center gap-2",children:M?(0,s.jsxs)(s.Fragment,{children:[s.jsx("span",{children:"Salvando..."}),s.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"})]}):s.jsx("span",{children:"Salvar Configura\xe7\xf5es"})})})]})]})]})})}function c({day:e,value:r,onChange:a}){return(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-32 flex-shrink-0",children:s.jsx("span",{className:"text-sm font-medium text-gray-700",children:e})}),s.jsx("input",{type:"text",value:r,onChange:e=>a(e.target.value),className:"flex-1 px-3 py-1.5 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary",placeholder:"10:00-22:00"})]})}},6909:(e,r,a)=>{"use strict";a.r(r),a.d(r,{$$typeof:()=>n,__esModule:()=>o,default:()=>l});var s=a(5153);let t=(0,s.createProxy)(String.raw`/projetos/cardapio/src/app/admin/configuracoes/page.tsx`),{__esModule:o,$$typeof:n}=t,i=t.default,l=i}};var r=require("../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),s=r.X(0,[271,840,548,45,956,308],()=>a(1885));module.exports=s})();